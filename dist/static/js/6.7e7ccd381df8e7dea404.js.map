{"version":3,"sources":["webpack:///src/views/users/Avatar.vue","webpack:///./src/views/users/Avatar.vue?e873","webpack:///./src/views/users/Avatar.vue"],"names":["keys_default","rules","forEach","rule","Object","vee_validate_esm","extends_default","message","zh_TW","Avatar","name","data","form","avatar","alertShow","alertMsg","alertType","dismissSecs","dismissCountDown","created","user","this","$store","state","typeof_default","methods","onSubmit","evt","_this","preventDefault","img","Image","onload","dispatch","showAlert","onerror","src","msg","_this2","type","arguments","length","undefined","$nextTick","document","documentElement","scrollTop","countDownChanged","components","ValidationProvider","ValidationObserver","users_Avatar","render","_vm","_h","$createElement","_c","_self","attrs","variant","dismissible","fade","show","on","dismissed","$event","dismiss-count-down","_v","_s","max","value","height","staticClass","to","icon","scale","shift-v","aria-hidden","active","ref","scopedSlots","_u","key","fn","invalid","submit","alt","valid","errors","label","label-for","description","id","placeholder","model","callback","$$v","$set","expression","disabled","block","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.7e7ccd381df8e7dea404.js","sourcesContent":["<template>\r\n    <b-col>\r\n        <b-alert\r\n            :variant=\"alertType\"\r\n            dismissible\r\n            fade\r\n            :show=\"dismissCountDown\"\r\n            @dismissed=\"dismissCountDown=0\"\r\n            @dismiss-count-down=\"countDownChanged\"\r\n        >\r\n            <p>{{ alertMsg }}</p>\r\n            <b-progress\r\n                :variant=\"alertType\"\r\n                :max=\"dismissSecs\"\r\n                :value=\"dismissCountDown\"\r\n                height=\"4px\"\r\n            ></b-progress>\r\n        \r\n        </b-alert>\r\n\r\n        <b-breadcrumb class=\"bg-white\">\r\n            <b-breadcrumb-item to=\"/\">\r\n            <b-icon icon=\"house-fill\" variant=\"dark\" scale=\"1.25\" shift-v=\"1.25\" aria-hidden=\"true\"></b-icon>\r\n             <span class=\"text-dark\"> Home</span>\r\n            </b-breadcrumb-item>\r\n            <b-breadcrumb-item active>個人資料 - 修改頭像</b-breadcrumb-item>\r\n        </b-breadcrumb>\r\n        \r\n        <ValidationObserver ref=\"observer\" v-slot=\"{ invalid }\">\r\n            <b-form @submit=\"onSubmit\">\r\n                <b-card-group class=\"border shadow-sm p-1 mb-5\">\r\n                    <b-card-body>\r\n                        <b-card class=\"border-0\">\r\n                            <b-card-text>\r\n                                <b-card-title>\r\n                                    <b-icon class=\"h1\" icon=\"image\" variant=\"primary\"></b-icon> \r\n                                    修改頭像\r\n                                </b-card-title>\r\n                                <hr>\r\n                                <div class=\"d-flex justify-content-md-center\">\r\n                                    <b-card-img class=\"mb-5\" :src=\"form.avatar\" alt=\"Avator 預覽\">\r\n                                    </b-card-img>\r\n                                </div>\r\n                                <ValidationProvider name=\"頭像網址\" \r\n                                        rules=\"required\" v-slot=\"{ valid,errors }\">\r\n                                    <b-form-group \r\n                                        label=\"頭像網址: \" \r\n                                        label-for=\"avatar\"\r\n                                        description=\"\"\r\n                                    >\r\n                                        <b-form-input\r\n                                        id=\"avatar\"\r\n                                        v-model=\"form.avatar\"\r\n                                        :state=\"errors[0] ? false : (valid ? true : null)\"\r\n                                        placeholder=\"\"\r\n                                        ></b-form-input>\r\n                                        <b-form-invalid-feedback id=\"inputLiveFeedback\">{{ errors[0] }}</b-form-invalid-feedback>\r\n                                    </b-form-group>\r\n                                </ValidationProvider>\r\n\r\n                                <b-button class=\"mt-4\" :disabled=\"invalid\" type=\"submit\" variant=\"primary\" block>\r\n                                    <b-icon icon=\"wrench\"></b-icon> 修 改\r\n                                </b-button>\r\n                            </b-card-text>\r\n                        </b-card>\r\n                    </b-card-body>\r\n                </b-card-group>\r\n            </b-form>\r\n        </ValidationObserver>\r\n    </b-col>\r\n</template>\r\n\r\n<script>\r\n// 引入表單驗證\r\nimport { ValidationProvider, extend ,ValidationObserver} from 'vee-validate';\r\nimport * as rules from 'vee-validate/dist/rules';\r\nimport { messages } from 'vee-validate/dist/locale/zh_TW.json';\r\n\r\n// 可使用所有rules\r\nObject.keys(rules).forEach(rule => {\r\n    extend(rule, {\r\n        ...rules[rule], // copies rule configuration\r\n        message: messages[rule] // assign message\r\n    });\r\n});\r\n\r\nexport default {\r\n    name: 'EditAvatar',\r\n    data() {\r\n        return {\r\n            form:{\r\n                avatar: '',\r\n            },\r\n            alertShow: null,\r\n            alertMsg:'',\r\n            alertType:'',\r\n            dismissSecs: 5,\r\n            dismissCountDown: 0,\r\n        }\r\n    },\r\n    created() {\r\n        const user = this.$store.state.user\r\n        if (user && typeof user === 'object') {\r\n            this.form.avatar = user.avatar\r\n        }\r\n    },\r\n    methods: {\r\n        onSubmit(evt) {\r\n            evt.preventDefault()\r\n            const avatar = this.form.avatar\r\n\r\n            // 如果頭像地址不爲空\r\n            if (avatar) {\r\n                // 新建一個 Image 的實例\r\n                let img = new Image()\r\n\r\n                // 加載成功時，上傳圖片\r\n                img.onload = () => {\r\n                    // 依然分發一個 updateUser 的事件，這裏只需傳入頭像信息\r\n                    this.$store.dispatch('updateUser', { avatar })\r\n                    this.showAlert('更新成功')\r\n                }\r\n\r\n                // 加載失敗時，只顯示一個失敗的提示\r\n                img.onerror = () => {\r\n                    this.showAlert('更新失敗', 'danger')\r\n                }\r\n\r\n                // 指定圖片地址\r\n                img.src = avatar\r\n            }\r\n        },\r\n        showAlert(msg, type = 'success') {\r\n            this.alertMsg = msg\r\n            this.alertType = type\r\n            this.alertShow = false\r\n            this.$nextTick(() => {\r\n                this.dismissCountDown = this.dismissSecs\r\n                document.documentElement.scrollTop = 20\r\n            })\r\n        },\r\n        countDownChanged(dismissCountDown) {\r\n            this.dismissCountDown = dismissCountDown\r\n        }\r\n    },\r\n    components: {\r\n        ValidationProvider,ValidationObserver\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .card-img { min-width: 200px; min-height: 200px; max-width: 50%;}\r\n    form,h4 { font-weight:700 }\r\n    .b-icon.bi {vertical-align: middle;}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/users/Avatar.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-col',[_c('b-alert',{attrs:{\"variant\":_vm.alertType,\"dismissible\":\"\",\"fade\":\"\",\"show\":_vm.dismissCountDown},on:{\"dismissed\":function($event){_vm.dismissCountDown=0},\"dismiss-count-down\":_vm.countDownChanged}},[_c('p',[_vm._v(_vm._s(_vm.alertMsg))]),_vm._v(\" \"),_c('b-progress',{attrs:{\"variant\":_vm.alertType,\"max\":_vm.dismissSecs,\"value\":_vm.dismissCountDown,\"height\":\"4px\"}})],1),_vm._v(\" \"),_c('b-breadcrumb',{staticClass:\"bg-white\"},[_c('b-breadcrumb-item',{attrs:{\"to\":\"/\"}},[_c('b-icon',{attrs:{\"icon\":\"house-fill\",\"variant\":\"dark\",\"scale\":\"1.25\",\"shift-v\":\"1.25\",\"aria-hidden\":\"true\"}}),_vm._v(\" \"),_c('span',{staticClass:\"text-dark\"},[_vm._v(\" Home\")])],1),_vm._v(\" \"),_c('b-breadcrumb-item',{attrs:{\"active\":\"\"}},[_vm._v(\"個人資料 - 修改頭像\")])],1),_vm._v(\" \"),_c('ValidationObserver',{ref:\"observer\",scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar invalid = ref.invalid;\nreturn [_c('b-form',{on:{\"submit\":_vm.onSubmit}},[_c('b-card-group',{staticClass:\"border shadow-sm p-1 mb-5\"},[_c('b-card-body',[_c('b-card',{staticClass:\"border-0\"},[_c('b-card-text',[_c('b-card-title',[_c('b-icon',{staticClass:\"h1\",attrs:{\"icon\":\"image\",\"variant\":\"primary\"}}),_vm._v(\" \\n                                修改頭像\\n                            \")],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"d-flex justify-content-md-center\"},[_c('b-card-img',{staticClass:\"mb-5\",attrs:{\"src\":_vm.form.avatar,\"alt\":\"Avator 預覽\"}})],1),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"頭像網址\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar valid = ref.valid;\nvar errors = ref.errors;\nreturn [_c('b-form-group',{attrs:{\"label\":\"頭像網址: \",\"label-for\":\"avatar\",\"description\":\"\"}},[_c('b-form-input',{attrs:{\"id\":\"avatar\",\"state\":errors[0] ? false : (valid ? true : null),\"placeholder\":\"\"},model:{value:(_vm.form.avatar),callback:function ($$v) {_vm.$set(_vm.form, \"avatar\", $$v)},expression:\"form.avatar\"}}),_vm._v(\" \"),_c('b-form-invalid-feedback',{attrs:{\"id\":\"inputLiveFeedback\"}},[_vm._v(_vm._s(errors[0]))])],1)]}}],null,true)}),_vm._v(\" \"),_c('b-button',{staticClass:\"mt-4\",attrs:{\"disabled\":invalid,\"type\":\"submit\",\"variant\":\"primary\",\"block\":\"\"}},[_c('b-icon',{attrs:{\"icon\":\"wrench\"}}),_vm._v(\" 修 改\\n                            \")],1)],1)],1)],1)],1)],1)]}}])})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b29f5632\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/users/Avatar.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b29f5632\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Avatar.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Avatar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Avatar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b29f5632\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Avatar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b29f5632\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/users/Avatar.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}